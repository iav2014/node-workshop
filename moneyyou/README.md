money you example test

this source code are server & subscribe

[server.js]

command line cluster server.

example: node server.js --ip 0.0.0.0 --http 3000 --https 3443

listen all network interfaces:0.0.0.0 and publish with autogenerated certificates.

Server can handle 5000 to 25000 request/second depending your processor (i5 i7)

[send]
1) put https listen & http port listen 
2) publish 2 routes: /send % /recover
3) put a user email & msg into a rabbitmq queue
4) response with 200 or 500 http code
[recover]
1) reveive user email field
2) find & recover data from mongodb email collection
3) response with 200 or 500 http code

[subscriber.js]
it is a rabbitmq consumer that receive a message from server queue and store it at mongodb
and performs a email to user, using nodemailer.
you can launch to many consumers if you need best perfomance.
Rabbitmq send messages them using a round robin pattern
this process notify to server process ones operating has been done (ack).

Scale up:
You can scale up server, using:
load balancer element -> point to a different server(s)
https certificate will be installed on lbe redirecting to http server port.
You can scale up server using kubernetes or aks8 (microsoft) with image docker

Security:
all api works in https mode.
server & subscriber & rabbitmq talk message with encrypt streams.

(c) Nacho Ariza - 12/10/2018
